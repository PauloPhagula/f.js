/*!
 * F - a JavaScript framework for modular and scalable SPAs
 */
var F=function(){"use strict";var n={},t=n;return n.VERSION="0.0.2",n.DEBUG=!1,n.noConflict=function(){return n=t,this},n}();
F.util=function(e,t,o){"use strict";var n={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},r={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'},i=function(e){return n[e]},u=function(e){return r[e]};return{each:e.each,compose:t.extend,extend:function(e,o){var n,r=this;return n=e&&t.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},t.extend(n,r,o),n.prototype=t.create(r.prototype,e),n.prototype.constructor=n,n.__super__=r.prototype,n},ready:e.ready,escape:i,unescape:u,replace:String.prototype.replace,uuid:function(){var e,t,o="";for(e=0;32>e;e++)t=16*Math.random()|0,(8===e||12===e||16===e||20===e)&&(o+="-"),o+=(12===e?4:16===e?3&t|8:t).toString(16);return o},template:t.template,productionize:function(e){var t,o;for(t in e)o=e[t],"function"==typeof o&&(e[t]=function(e,t){return function(){try{return t.apply(this,arguments)}catch(o){console.log(1,e+"(): "+o.message)}}}(t,o))},memoize:function(e){return function(){for(var t=Array.prototype.slice.call(arguments),o="",n=t.length,r=null;n--;)r=t[n],o+=r===Object(r)?JSON.stringify(r):r,e.memoize||(e.memoize={});return o in e.memoize?e.memoize[o]:e.memoize[o]=e.apply(this,t)}},setcookie:function(e,t,o,n,r,i){var u=e+"="+escape(t)+";";return o&&(u+="expires="+new Date(o+60*(new Date).getTimezoneOffset()).toGMTString()+";"),n&&(u+="path="+n+";"),r&&(u+="domain="+r+";"),i&&(u+="secure"),document.cookie=u,t},getcookie:function(e){for(var t=document.cookie.split("; "),o=0;o<t.length;o++){var n=t[o].split("=");if(e==n[0])return unescape(n[1])}return""},delcookie:function(e,t){document.cookie=e+"=blah; expires=Fri, 31 Dec 1999 23:59:59 GMT;"+(t?"domain="+t:"")}}}(jQuery,_),F.ready=F.util.ready,F.extend=F.util.extend,F.compose=F.util.compose;
F.Core=function(t){"use strict";var n,r,i={};return n=function(){},r=function(t){n()},{register:function(t,n,r){i[t]={creator:n,options:r,instance:null}},start:function(t,n){var r=i[t];r.instance=new r.creator(new F.Sandbox(this,t,n),t,r.options),r.instance.start()},stop:function(t){var n=i[t];n.instance&&(n.instance.stop(),n.instance=null)},restart:function(t){this.stop(t),this.start(t)},startAll:function(){for(var t in i)i.hasOwnProperty(t)&&this.start(t)},stopAll:function(){for(var t in i)i.hasOwnProperty(t)&&this.stop(t)},reportError:function(t,n,r){this.log(t,n,r)},init:r}}();
F.Core.dispatcher=function(){"use strict";var t="ID_",a="ACTION",l=!1,i={},c={},r=1,s=null;return{subscribe:function(a,l,i){var c=(this._callbacks||(this._callbacks={}),t+r++);return(this._callbacks[a]||(this._callbacks[a]=[])).push({callback:l,context:i,id:c}),c},unsubscribe:function(t,a){var l,i,c,r;if(!(i=this._callbacks[t]))return this;if(!(l=this._callbacks[t]))return this;for(c=0,r=l.length;r>c;c++){var s=l[c];s===a&&l.splice(c)}},publish:function(){var t=Array.prototype.slice.call(arguments,0),l=t.shift();if(l!==a){var i,r,s,n;if((r=this._callbacks)&&(i=this._callbacks[l]))for(s=0,n=i.length;n>s;s++){var e=i[s];e.callback.apply(e.context||null,t)}}else{this._start(t);try{var h,o,u,f;if(!(o=this._callbacks))return;if(!(h=this._callbacks[a]))return;for(u=0,f=h.length;f>u;u++){var b=h[u];c[b.id]||b.callback.apply(b.context||null,t)}}finally{this._stop()}}},publishAction:function(t){this.publish(a,t)},waitFor:function(t){for(var l=function(t){t.id===s&&(n=t)},r=0;r<t.length;r++){var s=t[r];if(c[s]){if(!i[s])throw new Error("dispatcher.waitFor(...): Circular dependency detected while waiting for "+s)}else{var n=null;if(this._callbacks[a].forEach(l(handler)),!n)throw new Error("dispatcher.waitFor(...):"+s+" does not map to a registered callback.");c[s]=!0,n.callback.apply(n.context||null),i[s]=!0}}},_start:function(t){var r,n,e,h;if((n=this._callbacks)&&(r=this._callbacks[a])){for(e=0,h=r.length;h>e;e++){var o=r[e];c[o.id]=!1,i[o.id]=!1}s=t,l=!0}},_stop:function(){s=null,l=!1}}}();
F.Sandbox=function(t){"use strict";function e(t,e,r){this.core=t,this.moduleId=e,this.element=r}return e.prototype={moduleCanPublish:function(t,e){return!0},publish:function(t,e,r,i){this.moduleCanPublish(this.moduleId,t)&&this.core.dispatcher.publish.call(t,e)},subscribe:function(t,e,r){this.core.dispatcher.subscribe(t,e,r)},unsubscribe:function(t,e){this.core.dispatcher.unsubscribe(t,e)},request:function(t,e){return this.core.http.request(t,e)},getConfig:function(t){return this.core.getModuleConfig(this.element,t)},reportError:function(t,e,r){return this.core.reportError(t,e,r)}},e}();
F.Store=function(t){"use strict";var i="CHANGE",s="ACTION";return{init:function(t,i){this._dispatcher=t,this._name=i,this._isUpdating=!1,this._data=[],this.actions={}},setup:function(){this.dispatchToken=this._dispatcher.subscribe(s,function(t){switch(t.type){case"":this.emitChange()}})},addChangeListener:function(t){this._callbacks||(this._callbacks={});(this._callbacks[i]||(this._callbacks[i]=[])).push({callback:t})},removeChangeListener:function(t){var s,a,c,n;if(!(a=this._callbacks[i]))return this;if(!(s=this._callbacks[i]))return this;for(c=0,n=s.length;n>c;c++){var h=s[c];h===t&&s.splice(c)}},emitChange:function(){var t,s,a,c;if(!(s=this._callbacks))return this;if(!(t=this._callbacks[i]))return this;for(a=0,c=t.length;c>a;a++){var n=t[a];n.callback.apply()}}}}();
F.Module=function(t){"use strict";function e(t,e,s){this._sandbox=t,this._name=e,this._defaults={stores:{}},this._options={},this._options=$.extend({},this._defaults,s),this.$el=null,this.el=null}return F.compose(e.prototype,{start:function(t,e){this.el=t,this.$el=document.querySelector('[data-module="'+this._name+'"]')},stop:function(){this.$el.innerHTML=""}}),e.extend=F.extend,e}();
F.router=function(n,r,t){"use strict";var o={$container:null,anchorMap:{page:"home",title:"Home"}},e=r.create();e.normalizeFn=r.NORM_AS_OBJECT;var a=function(){return n.extend(!0,{},o.anchorMap)},c=function(r){var t,c=a();try{t=n.uriAnchor.makeAnchorMap()}catch(i){return n.uriAnchor.setAnchor(c,null,!0),!1}o.anchorMap=t,document.title=t.title||"";var h="/",u=window.location.hash;return u.length>0&&(h=u.split("#").pop()),e.parse(h),!1},i=function(r){var t={prop:n(this).prop("href"),attr:n(this).attr("href")};t.attr.indexOf("javascript:void(0)")>-1||(r.preventDefault(),window.location.hash=t.attr)},h=function(n,r){e.addRoute(n,r)},u=function(){n.uriAnchor.configModule({schema_map:o.anchorMap}),n(window).on("hashchange",c).trigger("hashchange"),n(document).on("click","a[href]:not([data-external])",i)},s=function(){n(window).off("hashchange",c),n(document).off("click",i)},f=function(r){var t,e,c=a(),i=!0;n:for(t in r)if(r.hasOwnProperty(t)){if(0===t.indexOf("_"))continue n;c[t]=r[t],e="_"+t,r[e]?c[e]=r[e]:(delete c[e],delete c["_s"+e])}try{n.uriAnchor.setAnchor(c)}catch(h){n.uriAnchor.setAnchor(o.anchorMap,null,!0),i=!1}return i};return{add:h,go:f,start:u,stop:s}}(jQuery,crossroads);
F.Core.http=F.http=function(t,n){"use strict";function e(t){if(t.status>=200&&t.status<300)return t;var n=new Error(t.statusText);throw n.response=t,n}function r(t){return t.json()}function o(n,o){return o&&(o=t.extend({},i,o)),fetch(n,o).then(e).then(r)["catch"](function(t){throw new Error("There's been a problwm with your operation",t)})}function c(n,e){return t.ajax(n,e)}function u(t,n){return window.fetch&&"function"==typeof window.fetch?o(t,n):c(t,n)}var i={headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors",cache:"default",credentials:"same-origin"};return{request:u}}(jQuery);
F.$=function(n,u){"use strict";return{query:function(u,f){return n(u||"html").find(f)[0]||null},queryAll:function(u,f){return n.makeArray(n(u).find(f))},on:function(u,f,r){n(u).on(f,r)},off:function(u,f,r){n(u).off(f,r)},css:function(u,f){n(u).css(f)}}}(jQuery);
F.storage=function(t){"use strict";var a={},e={};a={get:function(o,r,c){if(r&&a.hasLocalStorage){var l=c?"getObject":"getItem";return localStorage[l](o)||t}return e[o]||t},set:function(t,o,r){if(r&&a.hasLocalStorage)try{localStorage.setItem(t,o)}catch(c){if("QUOTA_EXCEEDED_ERR"==c.name)throw o}else e[t]=o;return o},clear:function(t,o){o&&a.hasLocalStorage&&localStorage.removeItem(t),delete e[t]},empty:function(t){a.hasLocalStorage&&localStorage.clear(),t&&(e={})}};try{a.hasLocalStorage="localStorage"in window&&null!==window.localStorage}catch(o){a.hasLocalStorage=!1}return a}();