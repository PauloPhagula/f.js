/*!
 * f, v0.1.8 (2016/09/10 19:35)
 * A JavaScript framework for modular and scalable SPAs.
 * <https://github.com/dareenzo/f.js>
 *
 * Author: Paulo Phagula <https://dareenzo.github.io/>
 * License: MIT
 * 
 */
!function(){"use strict";var e=function(){var e={},t=e;return e.VERSION="0.1.8",e.DEBUG=!1,e.noConflict=function(){return e=t,this},Object.getOwnPropertyDescriptors=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=Object.getOwnPropertyDescriptor(e,n));return t},e.compose=Object.assign,e.extend=function(e,t){var n,r=this;return e.hasOwnProperty("constructor")||Object.defineProperty(e,"constructor",{value:function(){r.apply(this,arguments)},writable:!0,configurable:!0,enumerable:!1}),n=e.constructor,Object.assign(n,r,t),n.prototype=Object.create(r.prototype,Object.getOwnPropertyDescriptors(e)),n.prototype.constructor=n,n.__super__=r.prototype,n},e.delegateEvent=function(e,t,n,r,o,i){var c=function(e){return"undefined"==typeof n||null===n?r.call(o||null,e):e.target&&e.target.matches(n)?r.call(o||null,e):void 0};i=i||!1,e.addEventListener(t,c,i)},e.undelegateEvent=function(e,t,n,r,o,i){var c=function(e){return"undefined"==typeof n||null===n?r.call(o||null,e):e.target&&e.target.matches(n)?r.call(o||null,e):void 0};i=i||!1,e.removeEventListener(t,c,i)},e.injector=function(e){function t(e){var t,n,r,i;return"function"==typeof e?(t=e.$inject)||(t=[],e.length&&(n=e.toString().replace(d,""),r=n.match(f),r[1].split(l).forEach(function(e){e.replace(p,function(e,n,r){t.push(r)})})),e.$inject=t):o(e)?(i=e.length-1,u(e[i],"fn"),t=e.slice(0,i)):u(e,"fn",!0),t}function n(e,t){a[e]=t}function r(e,n,r){var i,c,s,u=[],f=t(e);for(c=0,i=f.length;c<i;c++){if(s=f[c],"string"!=typeof s)throw new Error("Incorrect injection token! Expected service name as string, got: "+s);u.push(r&&r.hasOwnProperty(s)?r[s]:a[s])}return o(e)&&(e=e[i]),e.apply(n||{},u)}function o(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return"function"==typeof e}function c(e){return function(){var t,n,r=arguments[0],o="["+(e?e+":":"")+r+"] ",i=arguments[1],c=arguments,s=function(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e};for(t=o+i.replace(/\{\d+\}/g,function(e){var t,n=+e.slice(1,-1);return n+2<c.length?(t=c[n+2],"function"==typeof t?t.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof t?"undefined":"string"!=typeof t?toJson(t):t):e}),t=t+"\nhttp://errors.angularjs.org/1.2.27/"+(e?e+"/":"")+r,n=2;n<arguments.length;n++)t=t+(2==n?"?":"&")+"p"+(n-2)+"="+encodeURIComponent(s(arguments[n]));return new Error(t)}}function s(e,t,n){if(!e)throw h("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function u(e,t,n){return n&&o(e)&&(e=e[e.length-1]),s(i(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}var a={},f=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,l=/,/,p=/^\s*(_?)(\S+?)\1\s*$/,d=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,h=c("ng");return{register:n,resolve:r}}(),e.Dispatcher=function(t){function n(){}var r="ID_",o="ACTION",i=!1,c={},s={},u={},a=1,f=null,l=function(e){if(i)throw new Error("Cannot run "+e+"in the middle of a dispatch.")},p=function(e){var t,n,r,a;if((n=u)&&(t=u[o])){for(r=0,a=t.length;r<a;r++){var l=t[r];s[l.id]=!1,c[l.id]=!1}f=e,i=!0}},d=function(){f=null,i=!1};return e.compose(n.prototype,{subscribe:function(e,t,n){l("Dispatcher.subscribe(...)"),u=u||(u={});var o=r+a++;return(u[e]||(u[e]=[])).push({callback:t,context:n,id:o}),o},unsubscribe:function(e,t){l("Dispatcher.subscribe(...)");var n,r,o,i;if(!(r=u[e]))return this;if(!(n=u[e]))return this;for(o=0,i=n.length;o<i;o++){var c=n[o];c===t&&n.splice(o)}},publish:function(){var e=Array.prototype.slice.call(arguments,0),t=e.shift();if(t!==o){var n,r,i,c;if((r=u)&&(n=u[t]))for(i=0,c=n.length;i<c;i++){var a=n[i];a.callback.apply(a.context||null,e)}}else{p(e);try{var f,l,h,v;if(!(l=u))return;if(!(f=u[o]))return;for(h=0,v=f.length;h<v;h++){var g=f[h];s[g.id]||g.callback.apply(g.context||null,e)}}finally{d()}}},dispatch:function(e){l("Dispatcher.dispatch(...)"),this.publish(o,e)},waitFor:function(e){l("Dispatcher.waitFor(...)");for(var t=function(e){e.id===r&&(i=e)},n=0;n<e.length;n++){var r=e[n];if(s[r]){if(!c[r])throw new Error("dispatcher.waitFor(...): Circular dependency detected while waiting for "+r)}else{var i=null;if(u[o].forEach(t(handler)),!i)throw new Error("dispatcher.waitFor(...):"+r+" does not map to a registered callback.");s[r]=!0,i.callback.apply(i.context||null),c[r]=!0}}}}),n}(),e.Core=function(t,n){function r(){u={},l={},p={},a=!1}function o(e){if(u.debug)throw e;f.publish("error",{exception:e})}function i(e,t,r,i,c){return!u.debug&&(c===n&&(c=new Error(e,t,r)),o(c),!0)}function c(e,t){var n,r,i=function(e,n){return function(){var r=t+"."+e+"() - ";try{return n.apply(this,arguments)}catch(i){i.methodName=e,i.objectName=t,i.name=r+i.name,i.message=r+i.message,o(i)}}};for(n in e)r=e[n],"function"==typeof r&&(e[n]=i(n,r))}function s(){e.injector.register("core",this)}var u={debug:!1},a=!1,f=new e.Dispatcher,l={},p={};return e.compose(s.prototype,{init:function(t){u=e.compose({},u,t),window.addEventListener("error",i),this.startAll(document.documentElement),f.publish("app init"),a=!0},destroy:function(){this.stopAll(document.documentElement),window.removeEventListener("error",i),r()},registerService:function(t,n,r,i){if(l.hasOwnProperty(t))return o(new Error("Service '"+t+"' already registered."));n=n||[],i=i||{},n.push(r);var c=e.injector.resolve(n);c.init(i),l[t]=c,e.injector.register(t,c)},registerModule:function(e,t,n,r){return p.hasOwnProperty(e)?o(new Error("Module with given name has already been registered. Mod name: "+e)):void(p[e]={factory:n,services:t,options:r,instance:null})},start:function(t,n){if(!p.hasOwnProperty(t))return o(new Error("Trying to start non-registered module: "+t));n=n||document.querySelector('[data-module="'+t+'"');var r=p[t],i=new e.Sandbox(this,t,n);r.instance=new r.factory(i,t,r.options);var s,a={};for(s=0;s<r.services.length;s++){var f=r.services[s];if(!l.hasOwnProperty(f))return o(new Error("Module requires an unregistered services: "+f));a[f]=l[f]}u.debug||c(r.instance,t),r.instance.start(n,a)},stop:function(e){var t=p[e];return t&&t.instance?(t.instance.stop(),void(t.instance=null)):o(new Error("Unable to stop module: "+e))},restart:function(e){this.stop(e),this.start(e)},startAll:function(e){for(var t in p)p.hasOwnProperty(t)&&this.start(t);return this},stopAll:function(e){for(var t in p)p.hasOwnProperty(t)&&this.stop(t);return this},dispatcher:f,getConfig:function(e){return"undefined"==typeof e?u:e in u?u[e]:null},setConfig:function(t){return a?o(new Error("Cannot set configuration after application is initialized")):void(u=e.compose({},u,t))},hasService:function(e){return l.hasOwnProperty(e)},getService:function(e){return l.hasOwnProperty(e)?l[e]:o(new Error("Extension '"+e+"' Not found"))},reportError:o}),s.extend=e.extend,s}(e.injector),e.Sandbox=function(t){function n(e,t,n){this.core=e,this.moduleName=t,this.element=n}return e.compose(n.prototype,{moduleCanPublish:function(e,t){return!0},publish:function(e,t,n,r){this.moduleCanPublish(this.moduleName,e)&&this.core.dispatcher.publish.call(e,t)},moduleCanDispatchAction:function(e,t){return!0},dispatch:function(e,t){if(!this.moduleCanDispatchAction(this.moduleName,e))throw new Error("module "+this.moduleName+" is not authorized to create action of type: "+e);this.core.dispatcher.dispatch({type:e,data:t})},subscribe:function(e,t,n){return this.core.dispatcher.subscribe(e,t,n)},unsubscribe:function(e,t){this.core.dispatcher.unsubscribe(e,t)},getConfig:function(e){return this.core.getConfig(this.element,e)},reportError:function(e){return this.core.reportError(e)},hasService:function(e){return this.core.hasService(extensionName)},getService:function(e){return this.core.getService(extensionName)},getElement:function(){return this.element}}),n.extend=e.extend,n}(),e.Module=function(t){function n(t,n,r){this._sandbox=t,this._name=n,this._defaults={},this._options={},this._services={},this._options=e.compose({},this._defaults,r),this.$el=null,this.events={}}return e.compose(n.prototype,{start:function(e,t){throw new Error("Module initialization not done. Override this function")},stop:function(){throw new Error("Module stopping not done. Override this function")},setElement:function(e){this.$el=e,this.undelegateEvents(),this.delegateEvents()},delegateEvents:function(t){t=t||this.events;var n=this;for(var r in t){var o,i,c;r.indexOf(" ")===-1?o=r:(o=r.slice(0,r.indexOf(" ")),i=r.slice(r.indexOf(" ")+1,r.length).trim()),c=n[t[r]],e.delegateEvent(n.$el,o,i,c,n)}},undelegateEvents:function(t){if(t){var n=this;for(var r in t){var o,i,c;r.indexOf(" ")===-1?o=r:(o=r.slice(0,r.indexOf(" ")),i=r.slice(r.indexOf(" ")+1,r.length).trim()),c=n[t[r]],e.undelegateEvent(n.$el,o,i,c,n)}}},render:function(){}}),n.extend=e.extend,n}(),e};"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&module.exports?module.exports=e():window.F=e()}();